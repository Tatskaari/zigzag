To set up userspace:

- Set up a GDT entry for the user process to set its segments
- Implement some kind of TSS for task scheduling
- Set up miscalls through interrupts 



